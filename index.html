<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Otomatik Borsa Takip</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            color: #333;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #6200ea;
            color: white;
            padding: 20px;
            text-align: center;
        }
        table {
            width: 80%;
            margin: 20px auto;
            border-collapse: collapse;
        }
        th, td {
            padding: 12px;
            border: 1px solid #ddd;
            text-align: center;
        }
        th {
            background-color: #6200ea;
            color: white;
        }
        .chart-container {
            width: 80%;
            margin: 20px auto;
        }
        footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 10px;
            position: fixed;
            bottom: 0;
            width: 100%;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header>
        <h1>Otomatik Borsa Takip</h1>
    </header>

    <table>
        <thead>
            <tr>
                <th>Hisse/Endeks</th>
                <th>Fiyat</th>
                <th>Değişim</th>
            </tr>
        </thead>
        <tbody id="stockTable">
            <!-- Hisse verileri buraya eklenecek -->
        </tbody>
    </table>

    <div class="chart-container">
        <canvas id="priceChart"></canvas>
    </div>

    <footer>
        <p>© 2023 Otomatik Borsa Takip. Tüm hakları saklıdır.</p>
    </footer>

    <script>
        // Alpha Vantage API Anahtarı
        const alphaVantageApiKey = 'EZEFV423V0JHADA2'; // Kendi API anahtarınızı ekleyin

        // Hisse senetleri ve sembolleri
        const stocks = [
            { name: "BIST 100", symbol: "XU100.IST" },
            { name: "S&P 500", symbol: "SPX" },
            { name: "NASDAQ", symbol: "IXIC" },
        ];

        // Kripto paralar
        const cryptos = [
            { name: "Bitcoin", symbol: "bitcoin" },
            { name: "Ethereum", symbol: "ethereum" },
        ];

        // Tabloya veri ekleme
        const tableBody = document.getElementById("stockTable");

        // Alpha Vantage API'sinden hisse verilerini çekme
        async function fetchStockData(symbol) {
            const url = `https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${symbol}&apikey=${alphaVantageApiKey}`;
            const response = await fetch(url);
            const data = await response.json();
            return data['Global Quote'];
        }

        // CoinGecko API'sinden kripto verilerini çekme
        async function fetchCryptoData(symbol) {
            const url = `https://api.coingecko.com/api/v3/simple/price?ids=${symbol}&vs_currencies=usd&include_24hr_change=true`;
            const response = await fetch(url);
            const data = await response.json();
            return data[symbol];
        }

        // Tüm verileri güncelleme
        async function updateData() {
            let tableContent = '';

            // Hisse senetleri
            for (const stock of stocks) {
                const data = await fetchStockData(stock.symbol);
                const price = data['05. price'];
                const change = data['10. change percent'];
                tableContent += `<tr>
                                    <td>${stock.name}</td>
                                    <td>${price}</td>
                                    <td>${change}</td>
                                 </tr>`;
            }

            // Kripto paralar
            for (const crypto of cryptos) {
                const data = await fetchCryptoData(crypto.symbol);
                const price = data.usd;
                const change = data.usd_24h_change.toFixed(2);
                tableContent += `<tr>
                                    <td>${crypto.name}</td>
                                    <td>${price}</td>
                                    <td>${change}%</td>
                                 </tr>`;
            }

            // Tabloyu güncelle
            tableBody.innerHTML = tableContent;
        }

        // Sayfa yüklendiğinde ve her 5 dakikada bir verileri güncelle
        updateData();
        setInterval(updateData, 300000); // 5 dakikada bir güncelle
    </script>
</body>
</html>